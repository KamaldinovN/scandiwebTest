{"ast":null,"code":"var _jsxFileName = \"/Users/hristakuritcak/WebstormProjects/shop/src/components/CurrencySwitcher/CurrencySwitcher.jsx\";\nimport { Component, createRef } from \"react\";\nimport { graphql } from \"@apollo/client/react/hoc\";\nimport styles from \"./CurrencySwitcher.module.css\";\nimport { LOAD_CURRENCIES } from \"../../GraphQl\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst options = [{\n  label: \"$ USD\",\n  value: \"USD\"\n}, {\n  label: \"£ GBP\",\n  value: \"GBP\"\n}, {\n  label: \"¥ JPY\",\n  value: \"JPY\"\n}, {\n  label: \"$ AUD\",\n  value: \"AUD\"\n}, {\n  label: \"₽ RUB\",\n  value: \"RUB\"\n}];\n\nclass CurrencySwitcher extends Component {\n  constructor() {\n    super(...arguments);\n    this.container = /*#__PURE__*/createRef();\n    this.state = {\n      open: false,\n      label: \"$\"\n    };\n\n    this.handleButtonClick = e => {\n      this.props.update(e.target.id);\n      this.setState(state => {\n        return {\n          open: !state.open\n        };\n      });\n    };\n\n    this.handleClickOutside = event => {\n      if (this.container.current && !this.container.current.contains(event.target)) {\n        this.setState({\n          open: false\n        });\n      }\n    };\n\n    this.handleListItemClick = event => {\n      const [currency] = event.target.innerText;\n      this.setState({\n        label: currency,\n        open: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"click\", this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.handleClickOutside);\n  }\n\n  render() {\n    const buttonStyle = this.state.open ? `${styles.button} ${styles[\"button--open\"]}` : `${styles.button} ${styles[\"button--closed\"]}`;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      ref: this.container,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: buttonStyle,\n        onClick: this.handleButtonClick,\n        children: this.state.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), this.state.open && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.dropdown,\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: options.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            data: item.value,\n            title: item.label,\n            id: index,\n            onClick: this.handleListItemClick,\n            children: item.label\n          }, item.value, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default graphql(LOAD_CURRENCIES)(CurrencySwitcher);","map":{"version":3,"names":["Component","createRef","graphql","styles","LOAD_CURRENCIES","options","label","value","CurrencySwitcher","container","state","open","handleButtonClick","e","props","update","target","id","setState","handleClickOutside","event","current","contains","handleListItemClick","currency","innerText","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","render","buttonStyle","button","dropdown","map","item","index"],"sources":["/Users/hristakuritcak/WebstormProjects/shop/src/components/CurrencySwitcher/CurrencySwitcher.jsx"],"sourcesContent":["import { Component, createRef } from \"react\";\nimport { graphql } from \"@apollo/client/react/hoc\";\n\nimport styles from \"./CurrencySwitcher.module.css\";\nimport { LOAD_CURRENCIES } from \"../../GraphQl\";\n\nconst options = [\n  {\n    label: \"$ USD\",\n    value: \"USD\",\n  },\n  {\n    label: \"£ GBP\",\n    value: \"GBP\",\n  },\n  {\n    label: \"¥ JPY\",\n    value: \"JPY\",\n  },\n  {\n    label: \"$ AUD\",\n    value: \"AUD\",\n  },\n  {\n    label: \"₽ RUB\",\n    value: \"RUB\",\n  },\n];\n\nclass CurrencySwitcher extends Component {\n  container = createRef();\n\n  state = {\n    open: false,\n    label: \"$\",\n  };\n\n  componentDidMount() {\n    document.addEventListener(\"click\", this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.handleClickOutside);\n  }\n\n  handleButtonClick = (e) => {\n    this.props.update(e.target.id);\n    this.setState((state) => {\n      return {\n        open: !state.open,\n      };\n    });\n  };\n\n  handleClickOutside = (event) => {\n    if (\n      this.container.current &&\n      !this.container.current.contains(event.target)\n    ) {\n      this.setState({\n        open: false,\n      });\n    }\n  };\n\n  handleListItemClick = (event) => {\n    const [currency] = event.target.innerText;\n    this.setState({\n      label: currency,\n      open: false,\n    });\n  };\n\n  render() {\n    const buttonStyle = this.state.open\n      ? `${styles.button} ${styles[\"button--open\"]}`\n      : `${styles.button} ${styles[\"button--closed\"]}`;\n\n    return (\n      <div className={styles.container} ref={this.container}>\n        <button\n          type=\"button\"\n          className={buttonStyle}\n          onClick={this.handleButtonClick}\n        >\n          {this.state.label}\n        </button>\n\n        {this.state.open && (\n          <div className={styles.dropdown}>\n            <ul>\n              {options.map((item, index) => (\n                <li\n                  key={item.value}\n                  data={item.value}\n                  title={item.label}\n                  id={index}\n                  onClick={this.handleListItemClick}\n                >\n                  {item.label}\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default graphql(LOAD_CURRENCIES)(CurrencySwitcher);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}